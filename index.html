<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisador de Skin Roblox</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #1a1a1a; color: white; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { background-color: #2d2d2d; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); width: 100%; max-width: 600px; }
        input { width: 80%; padding: 10px; border-radius: 5px; border: none; margin-bottom: 10px; }
        button { padding: 10px 20px; background-color: #00b06f; border: none; border-radius: 5px; color: white; cursor: pointer; font-weight: bold; }
        button:hover { background-color: #008f5a; }
        #result { margin-top: 20px; }
        .item-card { background: #3d3d3d; padding: 10px; margin: 10px 0; border-radius: 5px; display: flex; align-items: center; justify-content: space-between; }
        .item-card a { color: #00a2ff; text-decoration: none; font-size: 14px; }
        .error { color: #ff4d4d; }
        .loading { color: #ffd700; }
    </style>
</head>
<body>

<div class="container">
    <h2>Analisador de Avatar Roblox</h2>
    <p>Insira o Link do Perfil ou ID do Usuário:</p>
    <input type="text" id="userInput" placeholder="Ex: https://www.roblox.com/users/123456/profile">
    <button onclick="analyzeAvatar()">Analisar Skin</button>

    <div id="result"></div>
</div>

<script>
    async function analyzeAvatar() {
        const input = document.getElementById('userInput').value;
        const resultDiv = document.getElementById('result');
        
        // Extrair ID do link ou usar o número direto
        const userIdMatch = input.match(/users\/(\4001\d+|[0-9]+)/);
        const userId = userIdMatch ? userIdMatch[1] : input.trim();

        if (!userId || isNaN(userId)) {
            resultDiv.innerHTML = '<p class="error">Por favor, insira um ID ou link válido.</p>';
            return;
        }

        resultDiv.innerHTML = '<p class="loading">Buscando itens da skin... (Aguarde)</p>';

        try {
            // Usando proxy para evitar erro de CORS
            const proxy = "https://corsproxy.io/?";
            const apiUrl = `https://avatar.roblox.com/v1/users/${userId}/currently-wearing`;

            const response = await fetch(proxy + encodeURIComponent(apiUrl));
            const data = await response.json();

            if (!data.assetIds || data.assetIds.length === 0) {
                resultDiv.innerHTML = '<p class="error">Nenhum item encontrado ou perfil privado.</p>';
                return;
            }

            resultDiv.innerHTML = `<h3>Itens Detectados (${data.assetIds.length}):</h3>`;

            // Listar cada item com link direto
            data.assetIds.forEach(assetId => {
                const itemUrl = `https://www.roblox.com/catalog/${assetId}`;
                const card = document.createElement('div');
                card.className = 'item-card';
                card.innerHTML = `
                    <span>ID: <strong>${assetId}</strong></span>
                    <a href="${itemUrl}" target="_blank">Abrir no Catálogo ↗</a>
                `;
                resultDiv.appendChild(card);
            });

        } catch (error) {
            resultDiv.innerHTML = '<p class="error">Erro ao conectar com a API do Roblox. Tente novamente mais tarde.</p>';
            console.error(error);
        }
    }
</script>

</body>
</html>
